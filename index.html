<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Days Spent Already</title>

<link rel="manifest" href="manifest.json">

<style>
:root {
  --bg:#0f172a;
  --card:#111827;
  --primary:#22c55e;
  --muted:#94a3b8;
}

body {
  margin:0;
  font-family:system-ui;
  background:var(--bg);
  color:#e5e7eb;
  display:flex;
  justify-content:center;
  padding:14px;
}

.app {
  width:100%;
  max-width:430px;
  background:var(--card);
  border-radius:20px;
  padding:16px;
}

h1 {
  text-align:center;
  margin:6px 0 12px;
  font-size:22px;
}

.month {
  margin:18px 0 8px;
  font-size:14px;
  color:var(--muted);
  font-weight:600;
}

.days {
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
}

.day {
  aspect-ratio:1;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:12px;
  background:#334155;
  cursor:pointer;
}

.day.spent {
  background:var(--primary);
  color:#022c22;
  font-weight:600;
}

.day:hover {
  transform:scale(1.08);
}

footer {
  margin-top:16px;
  font-size:11px;
  text-align:center;
  color:var(--muted);
}
</style>
</head>

<body>
<div class="app">
<h1>Days Spent Already</h1>
<div id="calendar"></div>
<footer>Tap a day to explore history • news • festivals</footer>
</div>

<script>
const calendar = document.getElementById("calendar");
const today = new Date();
const year = today.getFullYear();

const months = [
  "January","February","March","April","May","June",
  "July","August","September","October","November","December"
];

const start = new Date(year,0,1);
const end = new Date(year+1,0,1);
const totalDays = (end-start)/86400000;
const spentDays = Math.floor((today-start)/86400000)+1;

let dayCount = 0;

months.forEach((month, mIndex) => {
  const monthTitle = document.createElement("div");
  monthTitle.className = "month";
  monthTitle.textContent = month;
  calendar.appendChild(monthTitle);

  const grid = document.createElement("div");
  grid.className = "days";

  const daysInMonth = new Date(year, mIndex+1, 0).getDate();

  for(let d=1; d<=daysInMonth; d++){
    dayCount++;
    const day = document.createElement("div");
    day.className = "day" + (dayCount <= spentDays ? " spent" : "");
    day.textContent = d;

    const dateStr = `${month} ${d}`;

    day.onclick = () => {
      const wiki = `https://en.wikipedia.org/wiki/${month}_${d}`;
      const news = `https://news.google.com/search?q=${month}%20${d}%20history`;
      const festival = `https://www.google.com/search?q=${month}%20${d}%20festival%20India`;
      const fun = `https://www.google.com/search?q=${month}%20${d}%20fun%20facts`;

      window.open(
        `${wiki}\n${news}\n${festival}\n${fun}`,
        "_blank"
      );
    };

    grid.appendChild(day);
  }

  calendar.appendChild(grid);
});

if("serviceWorker" in navigator){
  navigator.serviceWorker.register("service-worker.js");
}
</script>
</body>
</html>
